<div class="authors-container">
  <mat-accordion multi>
    <mat-expansion-panel hideToggle>
      <mat-expansion-panel-header>
        <mat-panel-title> Search</mat-panel-title>
        <mat-panel-description>
          Author name, book title, etc.
          <mat-icon>search</mat-icon>
        </mat-panel-description>
      </mat-expansion-panel-header>
      <div class="search-fields">
        <mat-form-field>
          <input
            matInput
            placeholder="Search by author name"
            [(ngModel)]="searchConfig.authorName"
          />
        </mat-form-field>
        <mat-form-field>
          <input
            matInput
            placeholder="Search by book title"
            [(ngModel)]="searchConfig.bookTitle"
          />
        </mat-form-field>
        <mat-form-field>
          <input
            matInput
            placeholder="Search by publisher"
            [(ngModel)]="searchConfig.publisher"
          />
        </mat-form-field>
      </div>
    </mat-expansion-panel>

    <mat-expansion-panel hideToggle>
      <mat-expansion-panel-header>
        <mat-panel-title>Filter</mat-panel-title>
        <mat-panel-description
          >Age category, genre, etc.
          <mat-icon>filter_list</mat-icon>
        </mat-panel-description>
      </mat-expansion-panel-header>
      <div class="search-fields">
        <mat-form-field>
          <mat-label>Select Age Category</mat-label>
          <mat-select [(ngModel)]="searchConfig.ageCategory">
            <mat-option [value]=""></mat-option>
            <mat-option
              *ngFor="let ageCategory of ageCategories"
              [value]="ageCategory"
            >
              {{ ageCategory }}
            </mat-option>
          </mat-select>
        </mat-form-field>

        <mat-form-field>
          <mat-label>Select Genre</mat-label>
          <mat-select [(ngModel)]="searchConfig.genre">
            <mat-option [value]=""></mat-option>
            <mat-option *ngFor="let genre of genres" [value]="genre">
              {{ genre }}
            </mat-option>
          </mat-select>
        </mat-form-field>

        <mat-form-field>
          <mat-label>Select Season</mat-label>
          <mat-select [(ngModel)]="searchConfig.season">
            <mat-option [value]=""> </mat-option>
            <mat-option *ngFor="let season of seasons" [value]="season">
              {{ season }}
            </mat-option>
          </mat-select></mat-form-field
        >
      </div>
    </mat-expansion-panel>
  </mat-accordion>

  <div class="show-cover-toggle">
    <mat-slide-toggle [(ngModel)]="showCovers">Show covers</mat-slide-toggle>
  </div>

  <div class="author-cards-container">
    <mat-card
      class="author-card"
      *ngFor="let author of authors$ | async | filter : searchConfig"
      (click)="openAuthorDetailDialog(author)"
    >
      <mat-card-header>
        <mat-card-title>{{ author.name }}</mat-card-title>
        <mat-card-subtitle>{{ author.title | uppercase }}</mat-card-subtitle>
      </mat-card-header>
      <img
        mat-card-image
        *ngIf="showCovers ? author.bookCoverUrl : author.authorPhotoUrl"
        [src]="showCovers ? author.bookCoverUrl : author.authorPhotoUrl"
        [alt]="showCovers ? author.bookCoverAltText : author.authorPhotoAltText"
        loading="lazy"
        height="200px"
        width="100%"
        class="author-card-image"
      />
    </mat-card>

    <div class="author-card-empty"></div>
    <div class="author-card-empty"></div>
    <div class="author-card-empty"></div>
  </div>
</div>
